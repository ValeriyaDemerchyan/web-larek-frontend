# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

После клонирования проекта установить зависимости:

npm install

Для запуска проекта в режиме разработки выполнить команду:

npm run start

# Сборка
Для сборки проекта в продакшен выполнить команду:

npm run build

Для данного проекта нет ограничений по использованию пакетного менеджера, поэтому можно использовать также YARN.

# Структура MVP
1. Модель(Model) - отвечает за хранение данных, обработку логики и взаимодействие с сервером

Модель будет включать классы, которые отвечают за работу с данными (например, получение данных с сервера)

- классы (Api)
- типы данных (ApiListResponse, ApiPostMethods)

2. Представление(View) -  отвечает за отображение данных пользователю.

Будет включать в себя классы и интерфейсы, которые управляют UI-элементами, такими как модальные окна и галерея продуктов.

- классы (Popup)
- интерфейсы (ICard, IGallery, IPage)

3. Представитель(Presenter) является посредником между моделью и представлением

- классы (EventEmitter)
- типы данных(EventName, Subscriber, EmitterEvent)

# Базовый код
Класс Popup - используется для создания модальных окон

Свойства:
1) container: HTML-элемент, который содержит всплывающее окно
2) events: объект IEvents. При открытии или закрытии модального окна будет использоваться для передачи событий

Методы:
1) render(): отрисовывает окно с данными
2) open(): открытие всплывающего окна
3) close(): закрытие всплывающего окна

Класс EventEmitter - брокер событий. Есть возможность подписаться на все события или слушать события по шаблону

Методы:
1) on(eventName, callback) - установить обработчик на событие
2) off(eventName, callback) - снять обработчик с события
3) emit(eventName, Data) - инициировать событие с данными
4) onAll(callback) -установить обработчик на все события
5) offAll() - снять обработчик со всех событий
6) trigger(eventName, context) - создает колобке триггер, генерирующий событие при вызове

Класс Api - класс, который способствует отправлению запросов к API
Конструктор состоит из 2 аргументов(baseUrl - базовый URL API и options - опции запроса)

Методы:
1) handlePesponse(response) - в случае успешного ответа от сервера возвращает объект JSON, если ответ не является успешным - ошибку (является защищенным методом)
2) getUri(uri) - отправляет GET-запрос к указанному URI
3) postUri(uri, data, method: ApiPostMethods = 'POST’) - отправляет именно POST-запрос к URI


# Интерфейсы

1. Интерфейс IPage - описывает страницу с каталогом продуктов

2. Интерфейс IGallery - описывает галерею продуктов, содержит массив элементов галереи (items: ICard[]). Каждый элемент в массиве представлен отдельной карточкой товара в галерее

3. Интерфейс ICard - описывает полностью все характеристики карточки товара

category: string - категория товара;
id: string - идентификатор товара;
title: string - заголовок товара;
description?: string - описание товара(опциональное поле);
image: string - ссылка на картинку товара;
price: number - цена товара;

4. Интерфейс IOrder - окошко для оплаты, описывает заказ
paymethod: string - метод оплаты;
address: string - адрес доставки;
total: number - общая сумма заказа;
items: string[] - массив продуктов в заказе;

5. Интерфейс IInfo - служит для информации о пользователе (email и номер телефона)

email: string - адрес электронной почты;
phone: string - номер телефона;

6. Интерфейс ICart - корзина с товарами. Состоит из массива объектов с продуктами из галереи и общей суммы заказа
items: HTMLElement[] - массив товаров в корзине;
total: number - общая сумма заказа корзины;
selected: string[] - массив идентификаторов выбранных товаров;

# Файл api.ts
Включает в себя тип, классы и методы для взаимодействия с сервером

Типы данных
1. ApiListResponse - отображает список(ответ от сервера)
total: number - общее число элементов в списке,
items: Type[] - список элементов

2. ApiPostMethods - представляет методы запросов на сервер('POST' - создание | 'PUT' - обновление | 'DELETE' - удаление)

Классы 
1. Api - класс, который способствует отправлению запросов к API
Конструктор состоит из 2 аргументов(baseUrl - базовый URL API и options - опции запроса)

Методы:
1) handlePesponse(response) - в случае успешного ответа от сервера возвращает объект JSON, если ответ не является успешным - ошибку (является защищенным методом)
2) getUri(uri) - отправляет GET-запрос к указанному URI
3) postUri(uri, data, method: ApiPostMethods = 'POST’) - отправляет именно POST-запрос к URI

# Файл events.ts 
Выступает как представитель. Служит центром для обработки событий в приложении, обеспечивая возможность между компонентами и другими частями системы взаимодействовать через события, не создавая жестких зависимостей между ними.

Типы данных
1. EventName - имя события, может быть строкой или регулярным выражением
2. Subscriber - функция, которая принимает данные и определенным образом работает с ними
3. EmitterEvent - представляет событие, принимамемое от эмиттера
eventName - имя события
data - данные события

Интерфейсы
1. IEvents - интерфейс для работы с событиями (подписка на события, их эмитации и триггера)

1) on - подписывает коллбек-функцию на событие. Принимает 2 параметра:
event - название события
callback - функция, вызываемая при срабатывании события

2) emit - митирует событие, вызывая все подписанные коллбеки для указанного события. Принимает 2 параметра:
event - название события
data - данные (тип Т), которые передаются всем подписанным коллбекам

3) trigger - возвращает функцию, которая может быть вызвана с данными события( будет использовать переданный контекст). Принимает 2 параметра:
event - название события
context - данные (тип Т), который может быть использован внутри возвращаемой функции

Классы
1. EventEmitter - брокер событий. Есть возможность подписаться на все события или слушать события по шаблону

Методы:
1) on(eventName, callback) - установить обработчик на событие
2) off(eventName, callback) - снять обработчик с события
3) emit(eventName, Data) - инициировать событие с данными
4) onAll(callback) -установить обработчик на все события
5) offAll() - снять обработчик со всех событий
6) trigger(eventName, context) - создает колобке триггер, генерирующий событие при вызове